<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP 大揭秘 | 杨成功的网络日志</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="努力做一个总结者和分享者">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.2c5cfdb9.js" as="script"><link rel="preload" href="/assets/js/2.f2c5ce74.js" as="script"><link rel="preload" href="/assets/js/21.df266199.js" as="script"><link rel="prefetch" href="/assets/js/10.5a3da8a1.js"><link rel="prefetch" href="/assets/js/11.19c9f606.js"><link rel="prefetch" href="/assets/js/12.5a0f0895.js"><link rel="prefetch" href="/assets/js/13.36676cb5.js"><link rel="prefetch" href="/assets/js/14.d1be516f.js"><link rel="prefetch" href="/assets/js/15.85b7b12a.js"><link rel="prefetch" href="/assets/js/16.7dd33441.js"><link rel="prefetch" href="/assets/js/17.cf75ed5d.js"><link rel="prefetch" href="/assets/js/18.736cb1d2.js"><link rel="prefetch" href="/assets/js/19.eded8cd1.js"><link rel="prefetch" href="/assets/js/20.4e8f0a2b.js"><link rel="prefetch" href="/assets/js/22.c1465f64.js"><link rel="prefetch" href="/assets/js/23.b884037a.js"><link rel="prefetch" href="/assets/js/24.5365b25c.js"><link rel="prefetch" href="/assets/js/25.98c3a2a0.js"><link rel="prefetch" href="/assets/js/26.ee26b529.js"><link rel="prefetch" href="/assets/js/27.676dbf1c.js"><link rel="prefetch" href="/assets/js/28.9f371ea9.js"><link rel="prefetch" href="/assets/js/29.d0db78aa.js"><link rel="prefetch" href="/assets/js/3.cf8cee26.js"><link rel="prefetch" href="/assets/js/30.12bb3ed9.js"><link rel="prefetch" href="/assets/js/31.ae72bfe9.js"><link rel="prefetch" href="/assets/js/32.41e91389.js"><link rel="prefetch" href="/assets/js/33.7e7ba217.js"><link rel="prefetch" href="/assets/js/34.3fdbcc03.js"><link rel="prefetch" href="/assets/js/35.bc7f8d0c.js"><link rel="prefetch" href="/assets/js/36.a7787e72.js"><link rel="prefetch" href="/assets/js/37.f0a10678.js"><link rel="prefetch" href="/assets/js/38.99105b73.js"><link rel="prefetch" href="/assets/js/39.65d9fa98.js"><link rel="prefetch" href="/assets/js/4.16dfa97b.js"><link rel="prefetch" href="/assets/js/40.a282c3bb.js"><link rel="prefetch" href="/assets/js/41.629a42b8.js"><link rel="prefetch" href="/assets/js/42.dc3ff357.js"><link rel="prefetch" href="/assets/js/43.b410e9af.js"><link rel="prefetch" href="/assets/js/44.b66d5e17.js"><link rel="prefetch" href="/assets/js/45.a38877bb.js"><link rel="prefetch" href="/assets/js/46.5394c768.js"><link rel="prefetch" href="/assets/js/47.2b1dae6c.js"><link rel="prefetch" href="/assets/js/48.4f4301da.js"><link rel="prefetch" href="/assets/js/49.84796251.js"><link rel="prefetch" href="/assets/js/5.878af4c4.js"><link rel="prefetch" href="/assets/js/50.22fd2e2f.js"><link rel="prefetch" href="/assets/js/51.5cfe6707.js"><link rel="prefetch" href="/assets/js/52.688a1306.js"><link rel="prefetch" href="/assets/js/53.2fdfb2e8.js"><link rel="prefetch" href="/assets/js/54.af537cab.js"><link rel="prefetch" href="/assets/js/55.3a8dd927.js"><link rel="prefetch" href="/assets/js/56.1534180f.js"><link rel="prefetch" href="/assets/js/57.b3a67412.js"><link rel="prefetch" href="/assets/js/58.6a79dc2a.js"><link rel="prefetch" href="/assets/js/59.af36ea8f.js"><link rel="prefetch" href="/assets/js/6.9c0fbe94.js"><link rel="prefetch" href="/assets/js/60.db643d0f.js"><link rel="prefetch" href="/assets/js/61.37feded7.js"><link rel="prefetch" href="/assets/js/62.584457f5.js"><link rel="prefetch" href="/assets/js/63.be90388b.js"><link rel="prefetch" href="/assets/js/64.86606aec.js"><link rel="prefetch" href="/assets/js/65.16f9d5f4.js"><link rel="prefetch" href="/assets/js/66.8e596eae.js"><link rel="prefetch" href="/assets/js/67.79d2a301.js"><link rel="prefetch" href="/assets/js/68.d094d9a2.js"><link rel="prefetch" href="/assets/js/69.b2235d57.js"><link rel="prefetch" href="/assets/js/7.e3b1c7d6.js"><link rel="prefetch" href="/assets/js/70.0bb2dca4.js"><link rel="prefetch" href="/assets/js/71.f99e25b2.js"><link rel="prefetch" href="/assets/js/72.eadf477a.js"><link rel="prefetch" href="/assets/js/73.4d0ee5e1.js"><link rel="prefetch" href="/assets/js/74.49c07fe1.js"><link rel="prefetch" href="/assets/js/75.78bbb3b9.js"><link rel="prefetch" href="/assets/js/76.290e38e9.js"><link rel="prefetch" href="/assets/js/77.99cc299e.js"><link rel="prefetch" href="/assets/js/78.8cbcf298.js"><link rel="prefetch" href="/assets/js/79.a8eff25a.js"><link rel="prefetch" href="/assets/js/8.7add360f.js"><link rel="prefetch" href="/assets/js/80.2a2acf51.js"><link rel="prefetch" href="/assets/js/81.d603aae1.js"><link rel="prefetch" href="/assets/js/82.15f4a38d.js"><link rel="prefetch" href="/assets/js/83.999875d7.js"><link rel="prefetch" href="/assets/js/84.e6de8b14.js"><link rel="prefetch" href="/assets/js/85.a9ce269e.js"><link rel="prefetch" href="/assets/js/86.53dcd6e1.js"><link rel="prefetch" href="/assets/js/87.359882c2.js"><link rel="prefetch" href="/assets/js/88.5303eb58.js"><link rel="prefetch" href="/assets/js/89.98f3b57f.js"><link rel="prefetch" href="/assets/js/9.774d418b.js"><link rel="prefetch" href="/assets/js/90.5343d941.js"><link rel="prefetch" href="/assets/js/91.f71f0623.js"><link rel="prefetch" href="/assets/js/92.ffdd1f51.js"><link rel="prefetch" href="/assets/js/93.b113b1aa.js"><link rel="prefetch" href="/assets/js/94.a4a8a44a.js"><link rel="prefetch" href="/assets/js/95.8f3be03e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">杨成功的网络日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="http-大揭秘"><a href="#http-大揭秘" class="header-anchor">#</a> HTTP 大揭秘</h2> <p>相比于 TCP，HTTP 在日常开发中更需要我们扎实的掌握。</p> <p>需要着重掌握三个方面的考点：</p> <ul><li>HTTP 请求方法；</li> <li>HTTP 状态码；</li> <li>对<strong>无状态</strong>的理解。</li></ul> <p>除此之外，还有 HTTP 不同阶段的特性。</p> <h3 id="http-通用考点梳理"><a href="#http-通用考点梳理" class="header-anchor">#</a> HTTP 通用考点梳理</h3> <h4 id="http-状态码"><a href="#http-状态码" class="header-anchor">#</a> HTTP 状态码</h4> <p>响应分为五类：</p> <ul><li>信息响应(100–199)，</li> <li>成功响应(200–299)，</li> <li>重定向(300–399)，</li> <li>客户端错误(400–499)，</li> <li>服务器错误 (500–599)</li></ul> <p>常用响应状态如下：</p> <ul><li><p><strong>1xx</strong>：需要客户端继续请求。</p></li> <li><p><strong>2xx</strong>：成功接收请求、且已处理完毕。
-- 200：OK，表示正常响应
-- 201：Created，请求成功，并创建了一个新的资源
-- 202：Accepted，请求成功，服务器正在处理（异步任务）
-- 206：Partical Content，处理部分 get 请求，断点续传和分块下载时的状态。</p></li> <li><p><strong>3xx</strong>：重定向。
-- 301：永久性重定向，表示资源已被分配了新的 URL
-- 302：临时性重定向，资源临时被分配了新的 URL
-- 304：返回缓存的资源</p></li> <li><p><strong>4xx</strong>：客户端错误
-- 400：Bad Request，常指参数错误
-- 401：Unauthorized，身份验证失败，token 失效
-- 403：Forbidden，服务器拒绝（多半是没权限）
-- 404：Not Found，资源不存在
-- 405：Method Not Allowed，请求方法错误
-- 408：Request Timeout：请求超时
-- 413：Payload Too Large：请求资源太大，拒绝处理（文件上传）</p></li> <li><p><strong>5xx</strong>：服务器错误
-- 500：服务器内部错误
-- 502：Bad Gateway，网关错误
-- 504：Gateway Timeout，网关超时</p></li></ul> <blockquote><p>网关：转发其他服务器通信数据的服务器</p></blockquote> <h4 id="http-请求方法"><a href="#http-请求方法" class="header-anchor">#</a> HTTP 请求方法</h4> <ul><li><strong>GET</strong>：数据读取，参数为 query 形式</li> <li><strong>POST</strong>：创建/修改资源，参数为 body 形式</li> <li><strong>HEAD</strong>：只获取响应头信息</li> <li><strong>PUT</strong>：修改某个具体资源</li> <li><strong>DELETE</strong>：删除指定的资源</li> <li><strong>OPTIONS</strong>：获取服务器支持的通信选项</li></ul> <h4 id="高频考点-对-无状态-的理解"><a href="#高频考点-对-无状态-的理解" class="header-anchor">#</a> 高频考点——对“无状态”的理解</h4> <p>HTTP 协议是无状态的。</p> <p>“无状态”可以理解为”无记忆“。即前一个 A 请求和后一个 B 请求完全无关联，互相独立。</p> <p>如果想维护状态信息怎么办？两个思路：<strong>cookie</strong> 和 <strong>session</strong>。</p> <ul><li><strong>cookie</strong>：存储在浏览器的小段文本，请求时会发到服务器上。</li> <li><strong>session</strong>：存储在服务器的数据。服务器创建一个 session 时，会将 session-id 写入 cookie 中。后面再从请求的 cookie 中解析出 session-id，进而找到这个 session。</li></ul> <h5 id="cookie"><a href="#cookie" class="header-anchor">#</a> cookie</h5> <p>一系列的键值对。形式为 name=value，中间用分号和空格分割。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>Cookie: <span class="token assign-left variable">PHPSESSID</span><span class="token operator">=</span>298zf09hf012fh2<span class="token punctuation">;</span> <span class="token assign-left variable">csrftoken</span><span class="token operator">=</span>u32t4o3tb3gg43<span class="token punctuation">;</span>
</code></pre></div><h3 id="http-的发展史"><a href="#http-的发展史" class="header-anchor">#</a> HTTP 的发展史</h3> <p>http 不是一成不变的，它一直在发展进化。截止到 2.0 过程如下：</p> <p><img src="/assets/8712AA1C-DAAE-4E43-AB90-26ECF3A09908.png" alt="8712AA1C-DAAE-4E43-AB90-26ECF3A09908"></p> <p>0.9 版本年代太过久远，这里不讨论。就从 1.0 开始说起：</p> <h4 id="http1-1-解决的问题"><a href="#http1-1-解决的问题" class="header-anchor">#</a> HTTP1.1 解决的问题</h4> <p>首先，要知道 HTTP1.0 的痛点：</p> <h5 id="_1-tcp-连接不可复用"><a href="#_1-tcp-连接不可复用" class="header-anchor">#</a> 1. TCP 连接不可复用</h5> <p>每通信一次，都需要“三步走” —— TCP 连接、HTTP 通信、断开 TCP 连接：</p> <p><img src="/assets/2BDFD233-2755-44E8-ACEB-A79E74515E1B.png" alt="2BDFD233-2755-44E8-ACEB-A79E74515E1B"></p> <p>当通信频率非常高时，这样每次三步走会很消耗资源。</p> <p>HTTP1.1 解决了这个问题，效果如图：</p> <p><img src="/assets/F238716F-8787-41E9-BF62-CA5BDE61243C.png" alt="F238716F-8787-41E9-BF62-CA5BDE61243C"></p> <p>这样在一个 TCP 连接里可以进行多次 HTTP 通信的机制，就是 —— <strong>长连接</strong>。</p> <h5 id="_2-队头阻塞问题"><a href="#_2-队头阻塞问题" class="header-anchor">#</a> 2. 队头阻塞问题</h5> <p>HTTP/1.0 中，请求是串行的。即一个个请求必须按顺序处理。</p> <p>这样的问题是：如果一个请求堵塞，后面的请求会一直等待。</p> <p>HTTP/1.1 解决方案：<strong>管线化</strong>。即允许多个 HTTP 请求批量提交到服务器。</p> <p>不过这个方案并未真正解决问题。因为服务器还是要安顺序响应，也就是说响应仍是串行的，还是会堵塞。</p> <h4 id="http2-0-对性能的改进"><a href="#http2-0-对性能的改进" class="header-anchor">#</a> HTTP2.0 对性能的改进</h4> <p>改进性能是 HTTP2.0 的核心目标。看看它作出的努力：</p> <h5 id="_1-二进制分帧"><a href="#_1-二进制分帧" class="header-anchor">#</a> 1. 二进制分帧</h5> <p>HTTP1.x 中，数据直接以文本传递。</p> <p>HTTP2.0 会将消息划分为<strong>消息</strong>和<strong>帧</strong>，并用二进制编码，确保高效解析。</p> <h5 id="_2-头部压缩"><a href="#_2-头部压缩" class="header-anchor">#</a> 2. 头部压缩</h5> <p>HTTP2.0 中，客户端和服务器会分别维护一份相同的头部静态 数据，和一份不同的动态数据。</p> <p>当发生通信时，不同的请求头会被写入动态数据。后面的请求只携带这份不同的请求头，其他头部信息从静态数据中获取。</p> <p>相对于 HTTP1.x 中每次都要携带整个头部跑来跑去的笨重操作来说，大大节省了网络开销。</p> <h5 id="_3-服务端推送"><a href="#_3-服务端推送" class="header-anchor">#</a> 3. 服务端推送</h5> <p>在 HTTP1.x 中，如果资源 A 依赖 资源 B，那么请求 资源 A 时必须要先请求资源 B。</p> <p>而 HTTP2.0 中，允许服务器主动向客户端 push 资源。即当客户端忘记请求资源 B 时，服务器可以主动将它推送给客户端。</p> <h5 id="_4-多路复用"><a href="#_4-多路复用" class="header-anchor">#</a> 4. 多路复用</h5> <p>上面说到，HTTP1.1 并未真正解决队头阻塞问题。</p> <p>到了 HTTP2.0，终于有了解决方案，就是多路复用。</p> <p><strong>多路复用其实就是进化版的长连接</strong>。</p> <p>在 HTTP 2.0 多路复用下，请求之前互相独立，完全实现了并行请求，并行响应，彻底解决了队头阻塞问题。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2c5cfdb9.js" defer></script><script src="/assets/js/2.f2c5ce74.js" defer></script><script src="/assets/js/21.df266199.js" defer></script>
  </body>
</html>
