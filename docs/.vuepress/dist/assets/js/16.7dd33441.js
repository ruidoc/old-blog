(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{372:function(s,a,t){"use strict";t.r(a);var e=t(44),v=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"分支简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支简介"}},[s._v("#")]),s._v(" 分支简介")]),s._v(" "),t("p",[s._v("先来了解一下分支的原理。")]),s._v(" "),t("p",[s._v("假设现在有一个工作目录，里面包含了三个将要被暂存和提交的文件：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("a.js b.js c.js\n")])])]),t("p",[s._v("第一步：暂存文件。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" a.js b.js c.js\n")])])]),t("p",[s._v("暂存操作大概有3个关键步骤：")]),s._v(" "),t("ol",[t("li",[s._v("为每一个文件计算校验和（使用 SHA-1 哈希算法）")]),s._v(" "),t("li",[s._v("每个文件生成 blob 对象，并指向对应的校验和")]),s._v(" "),t("li",[s._v("将所有校验和加入暂存区等待提交")])]),s._v(" "),t("blockquote",[t("p",[s._v("校验和，应该就是一个哈希字符串")])]),s._v(" "),t("p",[s._v("第二步：提交文件。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The initial commit of my project'")]),s._v("\n")])])]),t("p",[s._v("提交操作，大概有2个关键步骤：")]),s._v(" "),t("ol",[t("li",[s._v("将上一步保存在暂存区的三个 blob 对象保存为树对象。")]),s._v(" "),t("li",[s._v("创建一个提交对象，指向这个树对象。")])]),s._v(" "),t("p",[s._v("现在，Git 仓库中有五个对象：三个 blob 对象（文件快照）、一个树对象、一个提交对象（指向树对象指针和提交信息）:")]),s._v(" "),t("p",[t("img",{attrs:{src:"/assets/commit-and-tree.png",alt:"commit-and-tree"}})]),s._v(" "),t("h3",{attrs:{id:"分支创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支创建"}},[s._v("#")]),s._v(" 分支创建")]),s._v(" "),t("p",[s._v("分支创建，实际上只是创建了一个新的指针。")]),s._v(" "),t("p",[s._v("创建一个 develop 分支：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch develop\n")])])]),t("p",[s._v("这会在当前的提交对象上创建一个指针：")]),s._v(" "),t("p",[t("img",{attrs:{src:"/assets/two-branches.png",alt:"two-branches"}})]),s._v(" "),t("p",[s._v("看到这个图，你可能会有个疑问："),t("strong",[s._v("两个分支指向同一个提交，我怎么知道当前在哪个分支呢？")])]),s._v(" "),t("p",[s._v("也很简单，它有一个名为 "),t("code",[s._v("HEAD")]),s._v(" 的特殊指针，指向哪个分支，当前就在哪个分支。")]),s._v(" "),t("p",[t("img",{attrs:{src:"/assets/head-to-master.png",alt:"head-to-master"}})]),s._v(" "),t("p",[s._v("一个命令查看分支指向情况：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log --oneline --decorate\n")])])]),t("h3",{attrs:{id:"分支切换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支切换"}},[s._v("#")]),s._v(" 分支切换")]),s._v(" "),t("p",[s._v("使用 git checkout 命令切换分支。现在切换到 develop 分支去：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout develop\n")])])]),t("p",[s._v("这样 "),t("code",[s._v("HEAD")]),s._v(" 就指向 develop 分支了。")]),s._v(" "),t("h3",{attrs:{id:"head"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#head"}},[s._v("#")]),s._v(" HEAD")]),s._v(" "),t("p",[s._v("HEAD 永远指向当前所在的分支。")]),s._v(" "),t("p",[s._v("当前分支每提交一次，HEAD 随着提交操作自动向前移动。")]),s._v(" "),t("p",[s._v("在 testing 分支新提交一次，如图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"/assets/advance-testing.png",alt:"advance-testing"}})]),s._v(" "),t("p",[s._v("注意：此时由于 testing 分支比 master 多了一次提交，因此 "),t("strong",[s._v("领先")]),s._v(" master 分支一个提交。")]),s._v(" "),t("h3",{attrs:{id:"分叉"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分叉"}},[s._v("#")]),s._v(" 分叉")]),s._v(" "),t("p",[s._v("接下来，切换到 master 分支，再修改文件并提交：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 修改文件")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -a -m "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'made other changes'")]),s._v("\n")])])]),t("p",[s._v("此时的分支情况变成了这样：")]),s._v(" "),t("p",[t("img",{attrs:{src:"/assets/advance-master.png",alt:"advance-master"}})]),s._v(" "),t("p",[t("strong",[s._v("注意")]),s._v("：这里有个关键点，就是分支产生了"),t("strong",[s._v("分叉")]),s._v("。")]),s._v(" "),t("p",[s._v("多人协作中，这种情况非常普遍。因为基于同一个提交在不同分支做了修改，就会产生分叉。")]),s._v(" "),t("p",[s._v("查看分叉历史：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log --oneline --decorate --graph --all\n")])])]),t("p",[s._v("它会输出提交历史和分叉情况，便于查看分支的创建和合并历史，非常有用。")])])}),[],!1,null,null,null);a.default=v.exports}}]);