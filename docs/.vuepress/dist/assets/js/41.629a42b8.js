(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{397:function(t,s,a){"use strict";a.r(s);var r=a(44),n=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"重排与重绘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重排与重绘"}},[t._v("#")]),t._v(" 重排与重绘")]),t._v(" "),a("p",[t._v("上一节学到，页面要经过 "),a("em",[t._v("HTML解析-> css解析 -> 渲染树构建 -> 布局 -> 绘制")]),t._v(" 这样漫长的过程才能展现到我们面前。")]),t._v(" "),a("p",[t._v("然而这只是页面第一次绘制。在后续的交互过程中，我们可能会通过CSS、JS来对页面中的元素进行修改，这些会重新触发页面的生命周期。")]),t._v(" "),a("p",[t._v("重走页面生命周期的这个过程，有两种主要的形式 —— "),a("strong",[t._v("重排与重绘")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"什么是重排"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是重排"}},[t._v("#")]),t._v(" 什么是重排？")]),t._v(" "),a("p",[t._v("当我们操作 DOM 几何尺寸（比如修改元素的宽、高或隐藏元素等）时，浏览器需要重新计算 DOM 的尺寸和位置然后绘制出来。这个过程就是重排（也叫回流）")]),t._v(" "),a("p",[t._v("一个常见修改宽度的例子：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" targetDom "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'target'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntargetDom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'200px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("因为修改了dom宽度，不仅影响了盒模型本身的“占地面积”、还会整个页面中其它元素的布局形式。浏览器不得不重新针对布局信息进行计算，这就是典型的重排过程。")]),t._v(" "),a("p",[t._v("重排时，生命周期如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/F2A50147-AF8B-4DC3-9EC9-153F5CC2AC81.png",alt:"F2A50147-AF8B-4DC3-9EC9-153F5CC2AC81"}})]),t._v(" "),a("h4",{attrs:{id:"还有什么动作会触发重排"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#还有什么动作会触发重排"}},[t._v("#")]),t._v(" 还有什么动作会触发重排？")]),t._v(" "),a("p",[a("strong",[t._v("1. 改变 DOM 树的结构")])]),t._v(" "),a("p",[t._v("主要指的是节点的增减、移动等操作")]),t._v(" "),a("p",[a("strong",[t._v("2. 获取一些特定属性的值（重要）")])]),t._v(" "),a("p",[t._v("offset相关，scroll相关，client相关")]),t._v(" "),a("p",[t._v("共性：需要通过"),a("strong",[t._v("即时计算")]),t._v("得到的值都会触发回流")]),t._v(" "),a("h3",{attrs:{id:"什么是重绘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是重绘"}},[t._v("#")]),t._v(" 什么是重绘？")]),t._v(" "),a("p",[t._v("当我们修改了 DOM 的样式，此时并没有影响到布局，浏览器只需要为该元素绘制新的样式即可，这个过程就叫做重绘。")]),t._v(" "),a("p",[t._v("一个常见修改颜色的例子：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" targetDom "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'targetText'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntargetDom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("浏览器要想改变文字的颜色，只需要去变更像素点的色值即可，不涉及任何布局计算。因此，这是一个典型的重绘过程。")]),t._v(" "),a("p",[t._v("重绘时，生命周期如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/2EF8195A-BFBF-4895-9970-6DA71EFB92B5.png",alt:"2EF8195A-BFBF-4895-9970-6DA71EFB92B5"}})]),t._v(" "),a("h3",{attrs:{id:"命题思路点拨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命题思路点拨"}},[t._v("#")]),t._v(" 命题思路点拨")]),t._v(" "),a("p",[t._v("“针对页面渲染流程中的性能优化，你有什么思路？”")]),t._v(" "),a("p",[t._v("这个答案要答到重绘与重排，性能问题大多是重排引起的")])])}),[],!1,null,null,null);s.default=n.exports}}]);